{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Courses</title> {# Update with your name or site title #}
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- General Body Styles --- */
        body {
            font-family: 'Poppins', sans-serif;
            text-align: center;
            background: linear-gradient(135deg, #764ba2, #764ba2);
            margin: 0;
            padding-top: 70px; /* Space for the fixed header */
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            line-height: 1.6; /* Improved readability */
        }

        /* --- Header/Navigation Styles --- */
        .main-header {
            background-color: rgba(40, 0, 70, 0.8); /* Dark translucent purple */
            backdrop-filter: blur(8px);
            color: white;
            padding: 15px 0;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo a {
            color: white;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.8em;
            transition: color 0.3s ease;
        }
        .logo a:hover {
            color: #007bff;
        }

        .main-nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            gap: 25px;
        }

        .main-nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            font-size: 1.1em;
            transition: color 0.3s ease;
        }

        .main-nav ul li a:hover {
            color: #007bff;
        }

        /* --- Footer Styles --- */
        .main-footer {
            background-color: rgba(20, 0, 50, 0.9); /* Even darker translucent purple */
            backdrop-filter: blur(8px);
            color: #ccc;
            padding: 25px 20px; /* Reduced overall padding */
            width: 100%;
            margin-top: auto;
            box-shadow: 0 -4px 15px rgba(0,0,0,0.3);
            text-align: left;
        }

        .footer-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-section {
            flex: 1;
            min-width: 250px;
            margin-bottom: 15px; /* Reduced space between sections */
            padding-right: 20px;
        }

        .footer-section h3 {
            color: white;
            margin-bottom: 10px; /* Reduced space below headings */
            font-size: 1.2em;
        }

        .footer-section p, .footer-section a {
            color: #ccc;
            text-decoration: none;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .footer-section a:hover {
            color: #007bff;
        }

        .footer-nav ul, .social-links ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-nav ul li, .social-links ul li {
            margin-bottom: 5px; /* Reduced space between list items */
        }

        .social-links ul li {
            display: inline-block;
            margin-right: 15px;
        }

        .social-links img {
            width: 24px;
            height: 24px;
            vertical-align: middle;
            transition: transform 0.3s ease;
        }
        .social-links img:hover {
            transform: scale(1.1);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 15px; /* Reduced padding above copyright */
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            margin-top: 15px; /* Reduced margin above copyright */
            color: #aaa;
            font-size: 0.85em;
        }

        /* --- Page Content Specific Styling (for Courses) --- */
        .page-content {
            flex-grow: 1;
            padding: 40px 20px;
            max-width: 1200px; /* Increased max-width for 3 columns */
            width: 100%;
            margin: 30px auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 18px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            box-sizing: border-box;
            text-align: left; /* Align content left */
            color: white;
        }
        .page-content h1 {
            color: white;
            font-size: 2.2em;
            margin-bottom: 30px; /* More space below heading */
            text-align: center;
            font-weight: 600;
        }

        .course-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid; /* Use grid layout */
            grid-template-columns: repeat(3, 1fr); /* Exactly 3 columns */
            gap: 30px; /* Space between grid items */
        }

        .course-item {
            background: rgba(255, 255, 255, 0.15); /* Slightly lighter background for items */
            border-radius: 12px;
            padding: 25px; /* Increased padding to better contain buttons visually */
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            text-align: left;
            display: flex; /* Use Flexbox for vertical layout */
            flex-direction: column; /* Stack content vertically */
        }

        .course-item:hover {
            transform: translateY(-5px); /* Slight lift effect on hover */
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        /* Container for the course image */
        .course-image-container {
            width: 100%; /* Image container takes full width */
            height: 200px; /* Fixed height for the image container */
            overflow: hidden; /* Hide overflowing parts of the image */
            border-radius: 8px; /* Rounded corners for the image container */
            margin-bottom: 15px; /* Space below the image */
            background-color: rgba(0,0,0,0.1); /* Placeholder background */
            display: flex; /* Use flexbox to center image if needed */
            justify-content: center;
            align-items: center;
        }

        .course-image-container img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover; /* Crop image to cover the container */
        }


        .course-item h3 {
            color: white;
            font-size: 1.4em;
            margin-top: 0;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .course-item p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1em;
            line-height: 1.6;
            margin-bottom: 10px;
            flex-grow: 1; /* Allow description to take available space */
        }

         .course-details {
            font-size: 0.95em;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 15px;
         }

         .course-price-hours {
             font-size: 1em;
             color: rgba(255, 255, 255, 0.95);
             font-weight: 500;
             margin-top: 10px;
         }

        /* Container for the buttons */
        .course-buttons {
            margin-top: auto; /* Push buttons to the bottom */
            text-align: center; /* Center buttons within the container */
            display: flex; /* Use Flexbox to align buttons next to each other */
            justify-content: center; /* Center buttons horizontally */
            gap: 15px; /* Space between buttons */
            padding-top: 15px; /* Add some space above the buttons */
        }

        .course-link, .register-button {
            display: inline-block;
            padding: 8px 18px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            transition: background 0.3s ease, transform 0.2s ease;
            cursor: pointer; /* Indicate it's clickable */
            border: none; /* Remove default button border */
            font-family: 'Poppins', sans-serif; /* Use consistent font */
            font-size: 1em; /* Consistent font size */
        }

        .course-link {
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            color: white;
        }

        .course-link:hover {
             background: linear-gradient(90deg, #00f2fe, #4facfe);
             transform: translateY(-2px); /* Slight hover effect */
        }

        .register-button {
            background: linear-gradient(90deg, #ff416c, #ff4b2b);
            color: white;
        }

         .register-button:hover {
            background: linear-gradient(90deg, #ff4b2b, #ff416c);
            transform: translateY(-2px); /* Slight hover effect */
         }

        /* --- Payment Modal Styles --- */
        .payment-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7); /* Dark overlay */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000; /* Ensure it's above other content */
            visibility: hidden; /* Hidden by default */
            opacity: 0;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .payment-modal-overlay.visible {
            visibility: visible;
            opacity: 1;
        }

        .payment-modal-content {
            background: linear-gradient(135deg, #6a11cb, #2575fc); /* Gradient background for modal */
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            max-width: 500px; /* Max width for the modal */
            width: 90%; /* Responsive width */
            color: white;
            position: relative; /* Needed for close button positioning */
            /* Added max-height and overflow for scrolling */
            max-height: 90vh; /* Set maximum height relative to viewport height */
            overflow-y: auto; /* Add vertical scroll if content exceeds max-height */
            box-sizing: border-box; /* Include padding in the element's total width and height */
        }

        .payment-modal-content h2 {
            text-align: center;
            color: white;
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .payment-form-group {
            margin-bottom: 15px;
            text-align: left;
        }

        .payment-form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.9);
        }

        .payment-form-group input[type="text"],
        .payment-form-group input[type="email"],
        .payment-form-group input[type="number"],
        .payment-form-group input[type="tel"],
        .payment-form-group select {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            box-sizing: border-box;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            outline: none;
        }

         .payment-form-group input[type="text"]:focus,
         .payment-form-group input[type="email"]:focus,
         .payment-form-group input[type="number"]:focus,
         .payment-form-group input[type="tel"]:focus,
         .payment-form-group select:focus {
             box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
         }


        .payment-channels {
            margin-top: 15px; /* Space above the payment channels */
            margin-bottom: 20px; /* Space below the payment channels */
            text-align: left; /* Align label left */
        }

        .payment-channels label {
            display: block; /* Keep the main label on its own line */
            margin-bottom: 10px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.9);
        }

        /* Style for the container holding radio buttons and their labels */
        .payment-channel-options {
            display: flex; /* Use Flexbox to align items horizontally */
            flex-wrap: wrap; /* Allow items to wrap to the next line */
            gap: 15px; /* Space between payment options */
            justify-content: center; /* Center options horizontally */
        }

        .payment-channel-options div {
            display: flex; /* Use Flexbox for radio button and label alignment */
            align-items: center; /* Vertically align radio button and label */
        }

        .payment-channel-options input[type="radio"] {
            margin-right: 5px; /* Space between radio button and label */
            margin-bottom: 0; /* Remove bottom margin */
        }

        .payment-channel-options label {
            margin-bottom: 0; /* Remove bottom margin from individual labels */
            font-weight: 400; /* Slightly lighter font weight for individual labels */
            color: rgba(255, 255, 255, 0.9); /* Slightly lighter color */
        }


        .payment-submit-button {
            background: linear-gradient(90deg, #20bd57, #a2f7b7); /* Green gradient */
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: background 0.3s ease, transform 0.2s ease;
            width: 100%;
            margin-top: 20px;
        }

        .payment-submit-button:hover {
            background: linear-gradient(90deg, #a2f7b7, #20bd57);
            transform: translateY(-2px);
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5em;
            color: white;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: #ff416c; /* Highlight color on hover */
        }


        /* Responsive Adjustments */
        @media (max-width: 1024px) {
            .course-list {
                grid-template-columns: repeat(2, 1fr); /* 2 columns on medium screens */
                gap: 25px; /* Adjust gap for 2 columns */
            }
        }

        @media (max-width: 768px) {
            body { padding-top: 60px; }
            .main-header { padding: 10px 0; }
            .main-header .header-content {
                flex-direction: column;
                align-items: flex-start;
            }
            .main-nav ul {
                flex-wrap: wrap;
                justify-content: center;
                gap: 15px;
                width: 100%;
                padding-top: 10px;
            }
            .logo { margin-bottom: 10px; }
            .footer-content {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }
            .footer-section { padding-right: 0; }
            .footer-nav ul, .social-links ul {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
            }
            .social-links ul li { margin: 0 8px; }
            .page-content { margin: 20px; padding: 25px; border-radius: 15px; }
            .page-content h1 { font-size: 2em; }
            .course-list {
                grid-template-columns: 1fr; /* Single column on small screens */
                gap: 20px; /* Adjust gap for single column */
            }
            .course-item { padding: 15px; } /* Smaller padding on small screens */
            .course-item h3 { font-size: 1.2em; }
            .course-item p, .course-details, .course-price-hours { font-size: 0.95em; }
            .course-link, .register-button { padding: 6px 15px; font-size: 0.9em; }
            .course-buttons {
                 flex-direction: column; /* Stack buttons on small screens */
                 gap: 10px; /* Adjust gap for stacked buttons */
             }
             .payment-modal-content {
                 padding: 20px;
                 max-height: 85vh; /* Adjust max-height for smaller screens */
             }
             .payment-modal-content h2 { font-size: 1.6em; }
             .payment-channel-options {
                 flex-direction: column; /* Stack payment options on small screens */
                 gap: 8px; /* Adjust gap for stacked options */
             }
        }
    </style>
</head>
<body>
    {# --- Header / Navigation Bar --- #}
    <header class="main-header">
        <div class="header-content">
            <div class="logo">
                {# Link to the homepage using the 'index' URL name #}
                <a href="{% if user.is_authenticated %}{% url 'courses' %}{% else %}{% url 'index' %}{% endif %}">
                    {% if user.is_authenticated %}
                        {{ user.username }} {# Or {{ user.first_name }} if you collect first names #}
                    {% else %}
                        Your Name {# Replace with your actual name #}
                    {% endif %}
                </a>
            </div>
            <nav class="main-nav">
                <ul>
                    {# Link to the homepage using the 'index' URL name #}
                    <li><a href="{% url 'index' %}">Home</a></li> {# Link to the homepage #}
                    <li><a href="{% url 'cv' %}">CV</a></li>
                    <li><a href="{% url 'portfolio_page' %}">Portfolio</a></li> {# This link might point to a different portfolio page if needed #}
                    <li><a href="{% url 'certificates' %}">Certificates</a></li>
                    <li><a href="{% url 'contact' %}">Contact</a></li>
                    <li><a href="{% url 'about' %}">About</a></li>

                    {% if user.is_authenticated %}
                        {# Link to the Courses page - shown when logged in #}
                        <li><a href="{% url 'courses' %}">Courses</a></li>
                        {# Link to the logout view #}
                        <li><a href="{% url 'logout' %}">Logout</a></li>
                        {# Link to the profile edit view #}
                        <li><a href="{% url 'profile_edit' %}">Profile</a></li>
                    {% else %}
                        {# Link to the login view - shown when logged out #}
                        <li><a href="{% url 'login' %}">Login</a></li>
                    {% endif %}
                </ul>
            </nav>
        </div>
    </header>

    {# --- Main Courses Content --- #}
    <div class="page-content">
        <h1>{{ page_title|default:"My Courses Offered" }}</h1> {# Use context variable if provided, otherwise default #}

        <ul class="course-list">
            {# --- Example Course Item 1 --- #}
            <li class="course-item">
                {# Image container #}
                <div class="course-image-container">
                    {# Replace with the URL to your course image #}
                    <img src="{% static 'images/placeholder-course1.jpg' %}" alt="Course 1 Image"> {# Example static image #}
                </div>
                <h3>Course Title 1: Introduction to Programming</h3> {# Example Course Title #}
                <p>Learn the fundamentals of programming with Python. Covers variables, data types, control flow, and functions.</p> {# Example Course Description #}
                 <div class="course-details">
                    Category: Programming | Level: Beginner
                 </div> {# Example Course Details #}
                 <div class="course-price-hours">
                     Hours: 40 | Price: $200
                 </div> {# Hours and Price #}
                 {# Button container #}
                <div class="course-buttons">
                    <a href="#" class="course-link">Learn More</a> {# Example Course Link #}
                    {# Add data attribute to store course ID for payment #}
                    <button type="button" class="register-button" data-course-id="1" data-course-title="Introduction to Programming" data-course-price="200">Register</button> {# Register Button #}
                </div>
            </li>

            {# --- Example Course Item 2 --- #}
            <li class="course-item">
                {# Image container #}
                <div class="course-image-container">
                     {# Replace with the URL to your course image #}
                    <img src="{% static 'images/placeholder-course2.jpg' %}" alt="Course 2 Image"> {# Example static image #}
                </div>
                <h3>Course Title 2: Advanced Django Development</h3> {# Example Course Title #}
                <p>Dive deeper into Django with topics like custom user models, REST APIs, and deployment strategies.</p> {# Example Course Description #}
                 <div class="course-details">
                    Category: Web Development | Level: Advanced
                 </div> {# Example Course Details #}
                 <div class="course-price-hours">
                     Hours: 60 | Price: $350
                 </div> {# Hours and Price #}
                 {# Button container #}
                <div class="course-buttons">
                    <a href="#" class="course-link">Learn More</a> {# Example Course Link #}
                     {# Add data attribute to store course ID for payment #}
                    <button type="button" class="register-button" data-course-id="2" data-course-title="Advanced Django Development" data-course-price="350">Register</button> {# Register Button #}
                </div>
            </li>

             {# --- Example Course Item 3 --- #}
            <li class="course-item">
                {# Image container #}
                <div class="course-image-container">
                     {# Replace with the URL to your course image #}
                    <img src="{% static 'images/placeholder-course3.jpg' %}" alt="Course 3 Image"> {# Example static image #}
                </div>
                <h3>Course Title 3: Data Analysis with Pandas</h3> {# Example Course Title #}
                <p>Master data manipulation and analysis using the Pandas library in Python. Use Pandas for data cleaning, transformation, and analysis.</p> {# Example Course Description #}
                 <div class="course-details">
                    Category: Data Science | Level: Intermediate
                 </div> {# Example Course Details #}
                 <div class="course-price-hours">
                     Hours: 30 | Price: $180
                 </div> {# Hours and Price #}
                 {# Button container #}
                <div class="course-buttons">
                    <a href="#" class="course-link">Learn More</a> {# Example Course Link #}
                     {# Add data attribute to store course ID for payment #}
                    <button type="button" class="register-button" data-course-id="3" data-course-title="Data Analysis with Pandas" data-course-price="180">Register</button> {# Register Button #}
                </div>
            </li>

            {# Add more course items as needed by copying and pasting the .course-item div #}

        </ul>

    </div>

    {# --- Footer --- #}
    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-section footer-about">
                <h3>Your Name</h3> {# Replace with your name #}
                <p>A brief description about you or your project. You can add more text here.</p> {# Replace with your about text #}
            </div>
            <div class="footer-section footer-nav">
                <h3>Quick Links</h3>
                <ul>
                    {# Ensure these links use valid URL names #}
                    <li><a href="{% url 'index' %}">Home</a></li> {# Link to homepage #}
                    <li><a href="{% url 'cv' %}">CV</a></li>
                    <li><a href="{% url 'portfolio_page' %}">Portfolio</a></li>
                    <li><a href="{% url 'certificates' %}">Certificates</a></li>
                </ul>
            </div>
            <div class="footer-section footer-contact">
                <h3>Contact</h3>
                <p>Email: your.email@example.com</p> {# Replace with your email #}
                <p>Phone: +123 456 7890</p> {# Replace with your phone #}
                <p>Location: Your City, Country</p> {# Replace with your location #}
            </div>
            <div class="footer-section footer-social">
                <h3>Follow Me</h3>
                <ul class="social-links">
                    {# Ensure you have these icons in your static/images/ directory #}
                    <li><a href="https://linkedin.com/yourprofile" target="_blank"><img src="{% static 'images/linkedin-icon.png' %}" alt="LinkedIn"></a></li> {# Replace with your LinkedIn URL #}
                    <li><a href="https://github.com/yourprofile" target="_blank"><img src="{% static 'images/github-icon.png' %}" alt="GitHub"></a></li> {# Replace with your GitHub URL #}
                    <li><a href="https://twitter.com/yourprofile" target="_blank"><img src="{% static 'images/twitter-icon.png' %}" alt="Twitter"></a></li> {# Replace with your Twitter URL #}
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            &copy; 2026 Your Name. All rights reserved. {# Update year and name #}
        </div>
    </footer>

    {# --- Payment Modal Overlay (Hidden by default) --- #}
    <div class="payment-modal-overlay" id="paymentModalOverlay">
        <div class="payment-modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <h2>Register for Course</h2>

            {# Payment Form (Example Structure) #}
            <form id="paymentForm">
                {% csrf_token %} {# Include CSRF token for Django forms #}

                <div class="payment-form-group">
                    <label for="courseTitle">Course:</label>
                    <input type="text" id="courseTitle" value="" readonly> {# Display selected course title #}
                    <input type="hidden" id="courseId" value=""> {# Store course ID #}
                </div>

                 <div class="payment-form-group">
                    <label for="coursePrice">Price:</label>
                    <input type="text" id="coursePrice" value="" readonly> {# Display selected course price #}
                </div>

                <div class="payment-form-group">
                    <label for="fullName">Full Name:</label>
                    <input type="text" id="fullName" name="fullName" required placeholder="Enter your full name">
                </div>

                 <div class="payment-form-group">
                    <label for="paymentEmail">Email:</label>
                    <input type="email" id="paymentEmail" name="paymentEmail" required placeholder="Enter your email">
                </div>

                 <div class="payment-form-group">
                    <label for="cardNumber">Card Number:</label>
                    <input type="text" id="cardNumber" name="cardNumber" placeholder="Enter card number">
                </div>

                 <div class="payment-form-group">
                    <label for="expiryDate">Expiry Date (MM/YY):</label>
                    <input type="text" id="expiryDate" name="expiryDate" placeholder="MM/YY">
                </div>

                <div class="payment-form-group">
                    <label for="cvv">CVV:</label>
                    <input type="text" id="cvv" name="cvv" placeholder="CVV">
                </div>

                <div class="payment-channels">
                    <label>Choose Payment Channel:</label>
                    {# Container for the radio button options #}
                    <div class="payment-channel-options">
                        <div>
                            <input type="radio" id="paypal" name="paymentChannel" value="paypal">
                            <label for="paypal">PayPal</label>
                        </div>
                        <div>
                            <input type="radio" id="stripe" name="paymentChannel" value="stripe">
                            <label for="stripe">Stripe</label>
                        </div>
                         <div>
                            <input type="radio" id="banktransfer" name="paymentChannel" value="banktransfer">
                            <label for="banktransfer">Bank Transfer</label>
                        </div>
                        {# Add more payment channels as needed #}
                    </div>
                </div>


                <button type="submit" class="payment-submit-button">Complete Registration</button>
            </form>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const registerButtons = document.querySelectorAll('.register-button');
            const paymentModalOverlay = document.getElementById('paymentModalOverlay');
            const closeModalButton = document.getElementById('closeModal');
            const courseTitleInput = document.getElementById('courseTitle');
            const courseIdInput = document.getElementById('courseId');
            const coursePriceInput = document.getElementById('coursePrice');
            const paymentForm = document.getElementById('paymentForm');

            // Function to show the modal
            function showPaymentModal(courseId, courseTitle, coursePrice) {
                courseIdInput.value = courseId;
                courseTitleInput.value = courseTitle;
                coursePriceInput.value = `$${coursePrice}`; // Display price with dollar sign
                paymentModalOverlay.classList.add('visible');
            }

            // Function to hide the modal
            function hidePaymentModal() {
                paymentModalOverlay.classList.remove('visible');
                // Optionally reset form fields here
                paymentForm.reset();
            }

            // Add click event listeners to all register buttons
            registerButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const courseId = this.getAttribute('data-course-id');
                    const courseTitle = this.getAttribute('data-course-title');
                    const coursePrice = this.getAttribute('data-course-price');
                    showPaymentModal(courseId, courseTitle, coursePrice);
                });
            });

            // Add click event listener to the close button
            closeModalButton.addEventListener('click', hidePaymentModal);

            // Add click event listener to the overlay to close the modal
            paymentModalOverlay.addEventListener('click', function(event) {
                // Check if the click occurred directly on the overlay, not inside the modal content
                if (event.target === paymentModalOverlay) {
                    hidePaymentModal();
                }
            });

            // Prevent clicks inside the modal content from closing the modal
            const paymentModalContent = document.querySelector('.payment-modal-content');
            paymentModalContent.addEventListener('click', function(event) {
                event.stopPropagation(); // Stop the click event from bubbling up to the overlay
            });

            // Example form submission handling (replace with actual backend logic)
            paymentForm.addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent default form submission

                // Here you would collect form data and send it to your Django backend
                const formData = new FormData(paymentForm);
                const courseId = formData.get('courseId');
                const fullName = formData.get('fullName');
                const paymentEmail = formData.get('paymentEmail');
                const paymentChannel = formData.get('paymentChannel');
                // You would also get card details if applicable

                console.log('Payment form submitted!');
                console.log('Course ID:', courseId);
                console.log('Full Name:', fullName);
                console.log('Email:', paymentEmail);
                console.log('Payment Channel:', paymentChannel);

                // --- Placeholder for sending data to backend ---
                // You would use fetch or XMLHttpRequest to send this data
                // Example:
                /*
                fetch('/register-course/', { // Replace with your actual backend URL
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-CSRFToken': formData.get('csrfmiddlewaretoken') // Get CSRF token from the form
                    }
                    // Add headers like 'X-Requested-With': 'XMLHttpRequest' if needed
                })
                .then(response => {
                    if (!response.ok) {
                        // Handle HTTP errors
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json(); // Or response.text() depending on backend response
                })
                .then(data => {
                    console.log('Backend response:', data);
                    // Handle success response from the backend
                    // e.g., display a success message, redirect, etc.
                    hidePaymentModal(); // Hide modal on success
                    alert('Registration successful!'); // Example success feedback
                })
                .catch(error => {
                    console.error('Error:', error);
                    // Handle errors, e.g., display an error message to the user
                    alert('Registration failed. Please try again.'); // Example error feedback
                });
                */

                // For now, just hide the modal and show a basic alert
                alert('Registration submitted (backend processing needed)!');
                hidePaymentModal();
            });
        });
    </script>
</body>
</html>